---
// MainButton component - " sume"
export interface Props {
  text?: string;
}

const { text = "Get my Resume" } = Astro.props;
---

<div class="main-button w-full h-full px-2.5 py-[27px] bg-gradient-to-br from-transparent via-transparent to-black/30 shadow-[0px_4px_200px_rgba(255,255,255,0.05)] overflow-hidden rounded-[10px] bg-[url('/images/MainImage.webp')] bg-cover bg-center flex justify-center items-center gap-[5px] cursor-pointer transition-all duration-200">
  <div class="text-white font-display font-normal break-words" style="font-size: clamp(11px, 2vw, 15px); line-height: clamp(16px, 2.4vw, 21px);">{text}</div>
  <div class="w-[7.39px] h-[7.39px] rotate-[41deg] origin-top-left bg-white"></div>
  <div class="w-[7.39px] h-[7.39px] rotate-[41deg] origin-top-left bg-white"></div>
  <div class="w-[2.11px] h-[19px] rotate-[41deg] origin-top-left bg-white"></div>
</div>

<script>
  import { animate, inView } from "motion"

  // Use a more specific approach to avoid conflicts
  const initMainButton = () => {
    const mainButtons = document.querySelectorAll('.main-button')
    mainButtons.forEach((mainButton) => {
      // Appearance animation
      inView(mainButton, () => {
        animate(mainButton,
          { opacity: [0, 1], y: [20, 0] },
          { duration: 0.6, easing: "ease-out" }
        )
      })

      // Hover animations
      mainButton.addEventListener('mouseenter', () => {
        animate(mainButton,
          {
            y: -4,
            scale: 1.02,
            boxShadow: "0px 8px 300px rgba(255,255,255,0.12)"
          },
          { duration: 0.3, easing: "ease-out" }
        )
      })

      mainButton.addEventListener('mouseleave', () => {
        animate(mainButton,
          {
            y: 0,
            scale: 1,
            boxShadow: "0px 4px 200px rgba(255,255,255,0.05)"
          },
          { duration: 0.3, easing: "ease-out" }
        )
      })
    })
  }

  // Initialize immediately and also on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initMainButton)
  } else {
    initMainButton()
  }
</script>

<style>
  .main-button {
    opacity: 0;
  }
</style>
