---
// Me.astro - About section component
import MainButton from './MainButton.astro';
import SecondaryButton from './SecondaryButton.astro';
import { Number } from './Number.tsx';
---

<div class="me-section-wrapper w-full overflow-hidden relative justify-center flex">
  <div class="me-section w-full max-w-[1200px] mx-auto px-15 py-16 relative flex flex-col items-start gap-2.5">
  
  <!-- Header Section -->
  <div class="w-full h-[71px] justify-center flex flex-col" data-animate="fade-up">
    <h1 class="text-display text-black text-center font-median">
      LET ME INTRODUCE MYSELF
    </h1>
  </div>

  <!-- Subtitle -->
  <div class="w-full" data-animate="fade-up" data-delay="0.2">
    <p class="text-body-sm text-white font-primary">
      Hello! I'm Karen Ortiz, a creative developer with a knack for turning ideas into impactful digital experiences. 
      My passion lies in crafting solutions that not only solve problems but also spark joy and connection for users. 
      With a blend of innovative thinking and a deep curiosity for how people interact with technology.
    </p>
  </div>

  <!-- Main Content Section -->
  <div class="w-full h-[850px] flex flex-col lg:flex-row items-start ">
    
    <!-- Left Side - Content Section -->
    <div class="flex-1 self-stretch flex flex-col justify-center items-start gap-9 lg:min-w-[60%]">
      
      <!-- Profile Section -->
      <div class="w-full relative flex flex-wrap items-start" data-animate="fade-up" data-delay="0.4">
        <!-- Circle positioned behind text -->
        <div class="w-[244px] h-[238px] bg-[#D9CCFF] rounded-full absolute top-0 left-0 -z-10"></div>
        <div class="flex-1 relative z-10">
          <h2 class="text-hero font-median mb-2" style="font-size: clamp(48px, 8vw, 96px); line-height: 0.75;">
            <span class="text-[#080808]">karen ortiz,</span> <span class="text-[#7350cc]">Design<br />Engineer</span>
          </h2>
          <h3 class="text-heading-lg text-[#080808] font-secondary font-bold" style="font-size: clamp(28px, 4vw, 44px); line-height: 1.23;">
            Based in Mexico City
          </h3>
        </div>
      </div>

      <!-- Description -->
      <div class="w-full" data-animate="fade-up" data-delay="0.6">
        <p class="text-body-lg font-medium text-[rgba(8,8,8,0.6)] font-primary" style="font-size: 20px; line-height: 1.5;">
          That is where I come in. A lover of words, a wrangler of copy. Here to create copy that not only reflects 
          who you are and what you stand for, but words that truly land with those that read them, calling your 
          audience in and making them.
        </p>
      </div>

      <!-- Stats Section -->
      <div class="w-full max-w-[526px] flex items-start gap-[41px]" data-animate="fade-up" data-delay="0.8">
        <div class="w-[43px] h-[43px] bg-[rgba(8,8,8,0.03)] rounded-full"></div>
        <div class="flex flex-col justify-center items-start">
          <Number 
            value={8} 
            className="text-display text-[#080808] font-secondary" 
            style={{ fontSize: '48px', lineHeight: '56px' }}
            delay={800}
            client:load
          />
          <div class="text-body-lg font-medium text-[rgba(8,8,8,0.6)] font-primary" style="font-size: 20px; line-height: 30px;">Award winner</div>
        </div>
        
        <div class="w-[43px] h-[43px] bg-[rgba(8,8,8,0.03)] rounded-full"></div>
        <div class="flex flex-col justify-center items-start">
          <div class="flex items-center">
            <Number 
              value={1} 
              className="text-display text-[#080808] font-secondary" 
              style={{ fontSize: '48px', lineHeight: '56px' }}
              delay={1000}
              client:load
            />
            <span class="text-display text-[#080808] font-secondary" style="font-size: 48px; line-height: 56px;">.2k</span>
          </div>
          <div class="text-body-lg font-medium text-[rgba(8,8,8,0.6)] font-primary" style="font-size: 20px; line-height: 30px;">Worldwide client</div>
        </div>
        
        <div class="w-[43px] h-[43px] bg-[rgba(8,8,8,0.03)] rounded-full"></div>
        <div class="flex flex-col justify-center items-start">
          <div class="flex items-center">
            <Number 
              value={3} 
              className="text-display text-[#080808] font-secondary" 
              style={{ fontSize: '48px', lineHeight: '56px' }}
              delay={1200}
              client:load
            />
            <span class="text-display text-[#080808] font-secondary" style="font-size: 48px; line-height: 56px;">.5k</span>
          </div>
          <div class="text-body-lg font-medium text-[rgba(8,8,8,0.6)] font-primary" style="font-size: 20px; line-height: 30px;">Job done successfully</div>
        </div>
      </div>

      <!-- Buttons Section -->
      <div class="flex items-start gap-9" data-animate="fade-up" data-delay="1.0">
        <!-- Discover My Works Button -->
        <div class="w-[266px]">
          <SecondaryButton text="Discover My Works" />
        </div>

        <!-- Check my LinkedIn Button -->
        <div class="w-[266px]">
          <MainButton text="Check my linkedin" />
        </div>
      </div>
    </div>

    <!-- Right Side - Image Section -->
    <div class="flex-1 lg:min-w-[40%] h-[850px] flex items-center" data-animate="fade-left" data-delay="0.5">
      <div class="w-full aspect-square relative overflow-hidden rounded-lg">
        <img 
          src="/images/Me.webp" 
          alt="Karen Ortiz"
          class="w-full h-full object-cover object-center"
        />
      </div>
    </div>
  </div>
</div>

<style>
  .me-section-wrapper {
    background: white;
    position: relative;
    padding: 65px 60px;
  }

  .me-section-wrapper::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
      linear-gradient(rgba(0, 0, 0, 0.02) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0, 0, 0, 0.02) 1px, transparent 1px);
    background-size: 20px 20px;
    pointer-events: none;
    z-index: 1;
  }

  .me-section {
    position: relative;
    z-index: 2;
  }

  .secondary-btn {
    background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 50%, #000000 100%);
    box-shadow: 0px 4px 200px rgba(255, 255, 255, 0.05);
  }

  .main-btn {
    background: 
      linear-gradient(47deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.30) 100%),
      url('/images/MainImage.webp');
    background-size: cover;
    background-position: center;
    box-shadow: 0px 4px 200px rgba(255, 255, 255, 0.05);
  }

  .btn-text {
    text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.8);
  }


  .counter {
    transition: all 0.3s ease;
  }

  /* Animation styles */
  [data-animate] {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  [data-animate="fade-left"] {
    opacity: 0;
    transform: translateX(30px);
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  [data-animate].animate {
    opacity: 1;
    transform: translateY(0);
  }

  [data-animate="fade-left"].animate {
    opacity: 1;
    transform: translateX(0);
  }
</style>

<script>
  // Motion.dev scroll animations
  function initScrollAnimations() {
    const animatedElements = document.querySelectorAll('[data-animate]');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const element = entry.target as HTMLElement;
          const delay = parseFloat(element.getAttribute('data-delay') || '0');
          
          setTimeout(() => {
            element.classList.add('animate');
          }, delay * 1000);
          
          observer.unobserve(element);
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });
    
    animatedElements.forEach(element => observer.observe(element));
  }

  // Initialize when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    initScrollAnimations();
  });
  
  // Re-initialize for Astro page transitions
  document.addEventListener('astro:page-load', () => {
    initScrollAnimations();
  });
</script>
